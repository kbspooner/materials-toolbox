#!/usr/bin/env python

import sys
import argparse

from pymatgen.core.structure import Structure
from pymatgen.symmetry.analyzer import SpacegroupAnalyzer

parser = argparse.ArgumentParser()
parser.add_argument('-f', '--file', help='path to input file', default='POSCAR',
                    type=str)
parser.add_argument('-t', '--tol', help='symmetry tolerance (default 1e-3)',
                    default=1e-3, type=float)
args = parser.parse_args()

struct = Structure.from_file(args.file)
sym = SpacegroupAnalyzer(struct, symprec=args.tol)
conv = sym.get_conventional_standard_structure()
conv.to(filename="{}_conv".format(args.file), fmt="poscar")

print "Initial structure has {} atoms".format(struct.num_sites)
print "Final structure has {} atoms".format(conv.num_sites)
